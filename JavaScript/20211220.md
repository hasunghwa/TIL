# Java Script

## 1. ìŠ¤í¬ë¦½íŠ¸ htmlì—°ë™
> asyncì™€ defer ì°¨ì´ì 
### async
```jsx
<head>
  <script asyn src="main.js"></script>
</head>
```

html íŒŒì‹±í•˜ëŠ” ë™ì•ˆ ë³‘ë ¬ë¡œ jsíŒŒì¼ ë‹¤ìš´ë¡œë“œí•œë‹¤.  
js íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œ ë˜ë©´ íŒŒì‹±ì„ ë©ˆì¶”ê³  js íŒŒì¼ ì‹¤í–‰

![image1](./image/image1.png)
> async ë¬¸ì œì 
1. html íŒŒì‹±ë™ì•ˆ jsíŒŒì¼ ì‹¤í–‰ë˜ë©´ ë©ˆì¶¤
2. ë‹¤ìˆ˜ì˜ ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ â†’ ë‹¤ìš´ë¡œë“œ ë¨¼ì € ì™„ë£Œëœ ìˆœì„œëŒ€ë¡œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë¨


### defer
```jsx
<head>
  <script defer src="main.js"></script>
</head>
```
html íŒŒì‹±í•˜ëŠ”ë™ì•ˆ js íŒŒì¼ì„ ë°›ê³  íŒŒì‹±ì´ ëë‚˜ë©´ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰

![image2](./image/image2.png)
### strict
```jsx
'use strict';
```

ë¹„ìƒì‹ì ì¸ ì½”ë“œ ì“¸ìˆ˜ ì—†ë‹¤.(ex. ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ì‚¬ìš©)  
ë¹„ìƒì‹ì ì¸ ì½”ë“œ ì“¸ìˆ˜ ì—†ë‹¤.(ex. ì„ ì–¸ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ì‚¬ìš©)  
íš¨ìœ¨ì  ë¶„ì„ê°€ëŠ¥ â†’ ì„±ëŠ¥ê°œì„ 

### ì…ë ¥, ì—°ì‚°, ì¶œë ¥

**ë³€ìˆ˜**

****let

var â†’ ì„ ì–¸í•˜ê¸°ì „ì— ê°’ì‚¬ìš©ê°€ëŠ¥.... (var hoisting ì ¤ìœ„ë¡œ ì„ ì–¸ì„ ëŒì–´ ì˜¬ë ¤ì¤Œ)
      â†’ ë¸”ë¡ ë¬´ì‹œ

**ìƒìˆ˜**
const(ë³´ì•ˆ, ì•ˆì „í•œ ìŠ¤ë ˆë“œ, ì‹¤ìˆ˜ë¥¼ ì¤„ì„)

**ë³€ìˆ˜í˜•**

**number, string, boolean, null, undefiedn, symbol
object(êµ¬ì¡°ì²´ê°™ì€?), box container

function, first-class function(í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹ê°€ëŠ¥)
false: 0, null, undefinced, NaN, â€˜ â€™
null vs undefined
let nothing= null; â†’ null
let x; â†’ undefined
symbol.description
ë‹¤ì´ë‚˜ë¯¹ íƒ€ì´ë°(ë™ì‘í• ë•Œ í• ë‹¹ëœ ê°’ì—ë”°ë¼ í˜•ë³€í™˜)
immutable(ë³€ê²½x): premitive types, frozen objects(o.e. object.freeze())
mutable: all objects by default are mutable in JS

|| (or)
!

orì—ì„œ ì²« ë²ˆì§¸ ê°’ì´ trueì´ë©´ ë’¤ì—ìˆëŠ” ê°’ ìƒê´€ì—†ì´ trueì´ë¯€ë¡œ ë’¤ì— ê°’ì´ë‚˜ í•¨ìˆ˜ ê³„ì‚°í•  í•„ìš”ì—†ë‹¤. ê·¸ë˜ì„œ ê³„ì‚°ì´ í•„ìš”í•œ í•¨ìˆ˜ëŠ” ë’¤ìª½ìœ¼ë¡œ ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ

&& (and)

```jsx
if(nullobject != nulll){
	nullobject.something;
}
```

=== strict equality(íƒ€ì…ì„ ì‹ ê²½ì”€), no type conversion

ë¸”ë¡ë¨¼ì € ì‹¤í–‰â†’ do while

ì¡°ê±´ë¬¸ë§ì„ë•Œë§¨ â†’ while

default parameters ë§¤ê°œë³€ìˆ˜ì— ë””í´íŠ¸ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
function showMessage(message, from = 'unknown'){
	console.log(`${message} by ${from}`);
}
```

rest parameters (...args ë°°ì—´)

```jsx
function printAll(...args){
	for(let i = 0; i< args.length; i++)
		console.log(args[i]);

	for(const arg of args)
		console.log(arg);

	args.forEach((arg) => console.log(arg));
}
```

early return, early exit(ë¸”ë¡ì•ˆì—ì„œ ì½”ë“œ ë§ì´ ì‘ì„±í•˜ë©´ ê°€ë…ì„± ë–¨ì–´ì§â†’ ì¡°ê±´ì´ ë§ì§€ ì•Šìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ)

```jsx
function upgradeUser(user){
	if(user.point > 10){
	}
	if(user.point <= 10){
		return;
	}
}
```

### first-class function

- ë³€ìˆ˜ì— í• ë‹¹ë¨
- í•¨ìˆ˜ì˜ íŒŒë¼ë§¤í„°ë¡œ ì „ë‹¬ë¨
- ë¦¬í„´ê°’ìœ¼ë¡œë„ ì „ë‹¬ë¨

```jsx
const print = function(){ // anonymous function
	console.log('print');
}
```

callback(í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ í•¨ìˆ˜í˜¸ì¶œ)

```jsx
function randomQuiz(answer, printYes, printNo){
	if (answer === 'love you'){
		printYes();
	} else {
		printNo();
	}
}
```

arrow function

```jsx
const add = (a, b) => a + b;
const simpleMultiply = (a, b) => { return a * b; };
```

IIFE(ì„ ì–¸ê³¼ ë™ì‹œì— í˜¸ì¶œ)

```jsx
(function hello() {
	console.log('IIFE');
})();
```

class

```jsx
class Person{
	constructor(name, age){ // ìƒì„±ì
		this.name = name;
		this.age = age;
	}
	speak(){
		console.log(`${this.name}: hello!`); // ë©”ì†Œë“œ
	}
}
```

getter and setters

```jsx
class User{
	constructor(firstName, lastName, age){
		this.firstName = firstName;
		this.lastName = lastName;
		this.age = age;
	}

	get age(){
		return this._age;
	}

	set age(value){
		this._age = value < 0 ? 0: value;
	}
}
```

getê³¼ setì„ ì„ ì–¸í•˜ëŠ” ìˆœê°„ thisëŠ” getì„ =ëŠ” setì„ í˜¸ì¶œí•˜ê²Œ ëœë‹¤

ê·¸ë ‡ê¸° ë•Œë¬¸ì— setì—ì„œ this.age = valueë¥¼ ì‚¬ìš©í•˜ë©´ setí•¨ìˆ˜ë¥¼ ë¬´í•œí˜¸ì¶œí•˜ê²Œ ë¨ _ageë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ˆë°©

ìƒì†, ë‹¤í˜•ì„±

```jsx
class Shape {
	constructor(width, height, color){
		this.width = width;
		this.height = height;
		this.color = color;
	}

	draw(){
		console.log(`drawing ${this.color} color of`);
	}

	getArea(){
		return this.width * this.height;
	}
}

class Rectangle extends Shape{}
class Triangle extends Shape{
	draw(){
		super.draw();
		console.log('ì‚¼ê°í˜•');
	}
	getArea(){
		return (this.width * this.height) / 2;
	}
}

const rectangle = new Rectangle(20, 20, 'blue');
rectangle.draw();
console.log(rectangle.getArea());
const triangle = new Triangle(20, 20, 'blue');
triangle.draw();
console.log(triangle.getArea());
```

instanceof

```jsx
console.log(rectangle instanceof Rectangle);
console.log(triangle instanceof Rectangle);
console.log(triangle instanceof Triangle);
console.log(triangle instanceof Shape);
console.log(triangle instanceof Object);
```

object

```jsx
const obj1 = {}; // 'object literal'
const obj2 = new Object(); // 'object constructor'

const sunghwa = { name: 'sunghwa', age: 4 };
sunghwa.hasJob = true; // ì¶”ê°€
sunghwa['hasJob'] = true; // ì¶”ê°€
delete sunghwa.hasJob; // ì‚­ì œ
```

array

```jsx
'use strict';

const arr1 = new Array();
const arr2 = [1, 2];

const fruits= ['ğŸ¥’', 'ğŸŒ'];
console.log(fruits);
console.log(fruits.length);
console.log(fruits[0]);
console.log(fruits[1]);
console.log(fruits[fruits.length -1]);

for(let f of fruits){
	console.log(f);
}

fruits.forEach(function(fruit, index){
	console.log(fruit, index));
});

fruits.forEach((fruit) => console.log(fruit));

fruits.push('ğŸ', 'ğŸ‹');
console.log(fruits);
fruits.pop();
fruits.pop();
console.log(fruits);

fruits.unshift('ğŸ', 'ğŸ‹');
console.log(fruits);
fruits.shift();
fruits.shift();
console.log(fruits);

fruits.push('ğŸ', 'ğŸ‹', 'ğŸ“');
console.log(fruits);
fruits.splice(1, 1);
console.log(fruits);
fruits.splice(1, 1, 'ğŸ’', 'ğŸ‘');
console.log(fruits);

const fruits2 = ['ğŸ†', 'ğŸ'];
const newFruits = fruits.concat(fruits2);
console.log(newFruits);

console.clear();
console.log(fruits.indexOf('ğŸ’')); // ëª‡ë²ˆì§¸ì— ìˆëŠ”ì§€
console.log(fruits.includes('ğŸ’')); // ìˆëŠ”ì§€

console.clear();
console.log(fruits);
fruits.push('ğŸ“');
console.log(fruits.indexOf('ğŸ“')); // ì²«ë²ˆì§¸
console.log(fruits.lastIndexOf('ğŸ“')); // ë§ˆì§€ë§‰ì— ìˆëŠ” ë”¸ê¸°
```



 JSON

```jsx
'use strict';
// object to json
let json = JSON.stringify(true);
console.log(json);

json = JSON.stringify(['apple', 'banana']);
console.log(json);

const rabbit = {
	name: 'tori',
	color: 'white',
	size: null,
	birthDate: new Date(),
	symbol: Symbol('id'),
	jump: () => {
		console.log(`${name} can jump`);
	},
};
json = JSON.stringify(rabbit);
console.log(json);

json = JSON.stringify(rabbit, ["name", "color"]);
console.log(json);

json = JSON.stringify(rabbit, (key, value) => {
	console.log(key, value);
	return key === 'name' ? 'ellie' : value;
});
console.log(json);

// json to object
console.clear();
json = JSON.stringify(rabbit);
const obj = JSON.parse(json, (key, value) => {
	return key === 'birthDate' ? new Date(value) : value;
});
console.log(json);
rabbit.jump();

console.log(rabbit.birthDate.getDate());
```

ì½œë°±ì§€ì˜¥ ë™ê¸° ë¹„ë™ê¸°

```jsx
'use strict';
// ë™ë¹„ ë¹„ë™ê¸°
console.log('1');
setTimeout(() => console.log('2'), 1000);
console.log('3');

// ë™ê¸° ì½œë°±
function printImmediately(print){
	print();
}
printImmediately( () => console.log('hello'))
// ë¹„ë™ê¸° ì½œë°±
function printWithDelay(print, timeout){
	setTimeout(print, timeout);
}
printWithDelay(() => console.log('async callback'), 2000);

class UserStorage{
	loginUser(id, password, onSuccess, onError) {
		setTimeout(()=> {
			if (
				(id === 'ellie' && password === 'dream') ||
				(id === 'coder' && password === 'academy')
			) {
				onSuccess(id);
			} else {
				onError(new Error('not found'));
			}
		},2000);
	}

	getRoles(user, onSuccess, onError) {
		setTimeout(() => {
			if (user === 'ellie'){
				onSuccess({name: 'ellie', role: 'admin'});
			} else {
				onError(new onError('no access'));
			}
		}, 1000);
	}
}

const userStorage = new UserStorage();
const id = prompt('enter your id');
const password = prompt('enter your password');
userStorage.loginUser(
	id,
	password,
	user => {
		userStorage.getRoles(
			user,
			userWithRole => {
				alert(`Hello ${userWithRole.anme}, you have a ${userWithRole.role}`);
			},
			error => {
				console.log(error);
			}
		);
	},
	error => {console.log(error)}
);
```

promise

```jsx
'use strict';

// Promise
// state: pending -> fullfilled or rejected
// producer vs consumer

// 1. producer
// when new Promise is created, the executor runs automatically
const promise = new Promise((resolve, reject) =>{
	//doing some heavy work(network, read files)
	console.log('doing something...');
	setTimeout(() => {
		//resolve('ellie');
		reject(new Error('no network'))
	}, 2000);
});

// 2. Consumers: then, catch, finally
promise
	.then((value) => {
		console.log(value);
	})
	.catch((error) => {
		console.log(error);
	})
	.finally(() => {
		console.log('finally')
	});

// 3. chaining
const fetchNumber = new Promise((resolve, reject) =>{
	setTimeout(() => resolve(1), 1000);
});

fetchNumber
	.then(num => num * 2)
	.then(num => num * 3)
	.then(num => {
		return new Promise((resolve, reject) => {
			setTimeout(() => resolve(num - 1), 1000);
		});
	})
	.then(num => console.log(num));

// 4. error handling
const getHen = () =>
	new Promise((resolve, reject) => {
		setTimeout(() => resolve('ğŸ“'), 1000);
	});
const getEgg = hen =>
	new Promise((resolve, reject) => {
		setTimeout(() => reject(new Error(`error! ${hen} => ğŸ¥š`)), 1000);
	});
const cook = egg =>
	new Promise((resolve, reject) => {
		setTimeout(() => resolve(`${egg} => ğŸ°`), 1000);
	});

getHen()
	.then(hen => getEgg(hen))
	.catch(error => {
		return 'ğŸ¥ª';
	})
	.then(egg => cook(egg))
	.then(meal => console.log(meal));
```

ì§€ì˜¥â†’promise

```jsx
'use strict';

class UserStorage{
	loginUser(id, password) {
		return new Promise((resolve, reject) => {
			setTimeout(() => {
				if (
					(id === 'ellie' && password === 'dream') ||
					(id === 'coder' && password === 'academy')
				) {
					resolve(id);
				} else {
					reject(new Error('not found'));
				}			
			},2000);
		});
	}

	getRoles(user) {
		return new Promise((resolve, reject) => {
			setTimeout(() => {
				if (user === 'ellie'){
					resolve({name: 'ellie', role: 'admin'});
				} else {
					reject(new onError('no access'));
				}
			}, 1000);
		});
	}
}
const userStorage = new UserStorage();
const id = prompt('enter your id');
const password = prompt('enter your password');
userStorage
	.loginUser(id, password)
	.then(userStorage.getRoles)
	.then(user => alert(`Hello ${user.name}, you have a ${user.role}`))
	.catch(console.log);
```

async await

```jsx
'use strict';
// async & await
// clear style of using promise :)
// 1. async
// function fetchUser(){
// 	return new Promise((resolve, reject) =>{
// 		return resolve('ellie');
// 	});
// }

async function fetchUser(){ // promiseë¡œ ë§Œë“¤ì–´ì¤Œ
	return 'ellie';
}

const user = fetchUser();
user.then(console.log);
console.log(user);

// 2. await
function delay(ms){
	return new Promise(resolve => setTimeout(resolve, ms));
}
async function getApple(){
	await delay(1000); // ê¸°ë‹¤ë¦¼
	return 'ğŸ•';
}

async function getBanana(){
	await delay(1000);
	return 'ğŸ”';
}
// function getBanana(){
// 	return delay(1000).then(()=> 'ğŸ”');
// }

function pickFruits(){
	return getApple()
	.then(apple => {
		return getBanana()
		.then(banana => `${apple} + ${banana}`);
	});
}
pickFruits().then(console.log);

async function pickFruits(){
	const apple = await getApple(); // ë¯¸ë¦¬ ë°›ì•„ì˜´
	const banana = await getBanana();
	return `${apple} + ${banana}`;
}
pickFruits().then(console.log);

// 3. useful promise apis
function pickAllFruits(){
	return Promise.all([getApple(), getBanana()]) // ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ ë³‘ë ¬ì²˜ë¦¬
		.then(fruits => fruits.join(' + '));
}
pickAllFruits().then(console.log);

function pickOnlyOne(){
	return Promise.race([getApple(), getBanana()]); // ê°€ì¥ë¨¼ì € ë¦¬í„´í•˜ëŠ” í•˜ë‚˜ë§Œ
}
pickOnlyOne().then(console.log);
```
